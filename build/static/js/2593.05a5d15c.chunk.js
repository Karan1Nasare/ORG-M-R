"use strict";(self.webpackChunkmr_education_system=self.webpackChunkmr_education_system||[]).push([[2593],{60982:(e,t,a)=>{a.d(t,{A:()=>s});const s={HOST_URL:"https://superadmin.mandreducation.in",SUFFIX_URL:"/api/v1",LOGIN:"/login",LOG_OUT:"/logout",GET_PROFILE:"/profile",UPDATE_PROFILE:"/profile/update",CHANGE_PASSWORD:"/change-password",FORGOT_PASSWORD:"/password/email",RESET_PASSWORD:e=>"/password/reset?token=".concat(e),DASHBOARD:()=>"/dashboard",ADD_PLAN:()=>"/plans",GET_PLAN:()=>"/plans",EDIT_PLAN:e=>"/plans/".concat(e),UPDATE_PLAN:e=>"/plans/".concat(e),DELETE_PLAN:e=>"/plans/".concat(e),ADD_ADMIN:()=>"/admins",GET_ADMINS:()=>"/admins",EDIT_ADMIN:e=>"/admins/".concat(e),UPDATE_ADMIN:e=>"/admins/".concat(e),DELETE_ADMIN:e=>"/admins/".concat(e),ADD_FEATURE:()=>"/features",GET_FEATURES:()=>"/features",EDIT_FEATURE:e=>"/features/".concat(e),UPDATE_FEATURE:e=>"/features/".concat(e),DELETE_FEATURE:e=>"/features/".concat(e),ADD_QUESTION_BANK:()=>"/questionbanks",GET_QUESTION_BANK:()=>"/questionbanks",EDIT_QUESTION_BANK:e=>"/questionbanks/".concat(e),UPDATE_QUESTION_BANK:e=>"/questionbanks/".concat(e),DELETE_QUESTION_BANK:e=>"/questionbanks/".concat(e),ADD_COURSE:()=>"/courses",GET_COURSE:()=>"/courses",EDIT_COURSE:e=>"/courses/".concat(e),UPDATE_COURSE:e=>"/courses/".concat(e),DELETE_COURSE:e=>"/courses/".concat(e),ADD_SUBJECT:()=>"/subjects",GET_SUBJECT:()=>"/subjects",EDIT_SUBJECT:e=>"/subjects/".concat(e),UPDATE_SUBJECT:e=>"/subjects/".concat(e),DELETE_SUBJECT:e=>"/subjects/".concat(e),ADD_CHAPTER:()=>"/chapters",GET_CHAPTER:()=>"/chapters",EDIT_CHAPTER:e=>"/chapters/".concat(e),UPDATE_CHAPTER:e=>"/chapters/".concat(e),DELETE_CHAPTER:e=>"/chapters/".concat(e),ADD_LANGUAGES:()=>"/languages",GET_LANGUAGES:()=>"/languages",EDIT_LANGUAGES:e=>"/languages/".concat(e),UPDATE_LANGUAGES:e=>"/languages/".concat(e),DELETE_LANGUAGES:e=>"/languages/".concat(e),ADD_ACADEMIC_YEAR:()=>"/academic-years",GET_ACADEMIC_YEAR:()=>"/academic-years",EDIT_ACADEMIC_YEAR:e=>"/academic-years/".concat(e),UPDATE_ACADEMIC_YEAR:e=>"/academic-years/".concat(e),DELETE_ACADEMIC_YEAR:e=>"/academic-years/".concat(e),GET_NOTIFICATIION:e=>"/notifications?user_type=".concat(e),ADD_NOTIFICATION:()=>"/notifications",EDIT_NOTIFICATION:e=>"/notifications/".concat(e),DELETE_NOTIFICATION:e=>"/notifications/".concat(e)}},2593:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var s=a(65043),n=a(73216),l=a(61543),i=a(60982);const c=()=>{const{API:e}=(0,l.Q9)(),t=(0,n.Zp)(),[a,c]=(0,s.useState)([]),[o,r]=(0,s.useState)([]),[d,u]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),[h,p]=(0,s.useState)(1),[E,f]=(0,s.useState)(""),g=((0,s.useCallback)((async a=>{try{await e("DELETE",i.A.DELETE_NOTIFICATION(a),!0);t("/notifications")}catch(s){console.error("Error while adding notification",s)}}),[]),(0,s.useCallback)((async(a,s)=>{try{const n={...s};await e("POST",i.A.EDIT_NOTIFICATION(a),n,!0);t("/notifications")}catch(n){console.error("Error while adding notification",n)}}),[]));(0,s.useEffect)((()=>{try{(async()=>{try{var t;const a="Admin",s=await e("GET",i.A.GET_NOTIFICATIION(a),{},!0);if(200!==s.status)throw s;console.log("response",s),c(null===(t=s.data)||void 0===t?void 0:t.data)}catch(a){console.log("error while fetching questions",a)}})()}catch(t){console.log("error while fetching notifications",t)}}),[]),(0,s.useEffect)((()=>{if(""===E.trim())return r([]),void p(1);const e=a.filter((e=>{var t;return null===e||void 0===e||null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(null===E||void 0===E?void 0:E.toLowerCase())}));r(e),p(1)}),[E,a]);const A=4*h,D=A-4;return{data:E?o.slice(D,A):a.slice(D,A),isEditOpen:d,openDelete:m,searchTerm:E,totalShowItems:null===a||void 0===a?void 0:a.length,currentPage:h,ITEMS_PER_PAGE:4,setCurrentPage:p,handleSearchChange:e=>{f(e.target.value)},openEditDialog:()=>u(!0),closeEditDialog:()=>u(!1),confirmDeleteHandler:()=>x(!1),handleCloseDelete:()=>x(!1),openDeleteDialog:()=>x(!0),handleAddNotification:()=>t("/addNotification"),handleUpdateNotification:(e,t)=>{g(e,t)}}};var o=a(66423),r=a(86178),d=a.n(r),u=a(2706),m=a(72196),x=a(98861),h=a(70579);const p=e=>{let{id:t,initialTitle:a,initialDescription:n,heading:l,isOpen:i,onClose:c,handleUpdateNotification:r}=e;const[d,u]=(0,s.useState)(a),[p,E]=(0,s.useState)(n),[f,g]=(0,s.useState)(null);(0,s.useEffect)((()=>{u(a),E(n),g(null)}),[a,n]);return i?(0,h.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-20 text-start",children:(0,h.jsxs)("div",{className:"flex flex-col px-8 py-7 rounded-3xl border border-gray-700 border-solid text-start bg-secondary__fill w-42.6 max-md:px-5",children:[(0,h.jsxs)("div",{className:"flex gap-5 text-xl text-white max-md:flex-wrap max-md:max-w-full",children:[(0,h.jsx)("div",{className:"flex-auto my-auto",children:l}),(0,h.jsx)(o.In,{icon:"material-symbols-light:close",className:"text-white cursor-pointer",onClick:c})]}),(0,h.jsx)("div",{className:"shrink-0 items-center h-px border border-solid bg-slate-500 border-slate-500 max-md:max-w-full"}),(0,h.jsxs)("div",{className:"flex overflow-hidden relative rounded flex-col justify-center items-center px-20 pt-11 pb-20 mt-11 text-base text-center text-white whitespace-nowrap min-h-[158px] max-md:px-5 max-md:mt-10 max-md:max-w-full",children:[(0,h.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:f?(0,h.jsx)("img",{loading:"lazy",src:f.url,className:"object-cover w-full h-full opacity-50",alt:"Selected Image"}):(0,h.jsx)("img",{loading:"lazy",src:m,className:"object-cover w-full h-full opacity-50",alt:"Default Image"})}),(0,h.jsxs)("div",{className:"relative z-10 flex flex-col items-center justify-center",children:[(0,h.jsxs)("label",{htmlFor:"fileInput",className:"cursor-pointer",children:[(0,h.jsx)(o.In,{icon:"uil:image-upload",className:"text-white text-xl mb-1"}),(0,h.jsx)("input",{id:"fileInput",type:"file",hidden:!0,onChange:e=>{const t=e.target.files[0];if(t){const e="".concat(Date.now(),"-").concat(t.name),a={url:"https://mr-education-app.s3.ap-south-1.amazonaws.com/uploads/notification/".concat(e),mime_type:t.type,name:t.name,size:t.size};g(a)}}})]}),(0,h.jsx)("span",{className:"text-white text-lg cursor-pointer",onClick:()=>document.getElementById("fileInput").click(),children:"Change"})]})]}),(0,h.jsxs)("div",{className:"mt-5 flex flex-col text-sm max-w-[613px]",children:[(0,h.jsx)("div",{className:"w-full text-white max-md:max-w-full",children:"Title"}),(0,h.jsx)("input",{type:"text",placeholder:"Enter Title",className:"justify-center px-3 py-3 mt-2 rounded border border-gray-700 border-solid leading-[143%] text-ellipsis text-stone-300 bg-secondary__fill max-md:max-w-full",value:d,onChange:e=>u(e.target.value)})]}),(0,h.jsx)("div",{className:"mt-5 text-sm text-white max-md:max-w-full",children:"Description"}),(0,h.jsx)("div",{className:"mt-2",children:(0,h.jsx)(x.A,{value:p,onChange:E})}),(0,h.jsx)("button",{className:"justify-center self-center px-7 py-3 mt-8 text-base text-center whitespace-nowrap bg-white rounded-lg text-slate-900 max-md:px-5",onClick:()=>{r(t,{title:d,description:p,image:f})},children:"Update"})]})}):null};function E(e){let{src:t,alt:a}=e;return(0,h.jsx)("img",{loading:"lazy",src:t,alt:a,className:"w-[37px] h-[37px]"})}function f(e){let{label:t,value:a}=e;return(0,h.jsxs)("div",{className:"mt-1.5 text-xs text-orange__primary capitalize",children:[t," : ",a]})}function g(e){let{children:t}=e;return(0,h.jsx)("div",{className:"mt-6 text-xs leading-4 text-gray-400 max-md:max-w-full text-left",children:t})}const A=function(e){let{id:t,title:a,description:s,createdAt:n,isEditOpen:l,openDelete:i,openEditDialog:c,closeEditDialog:r,confirmDeleteHandler:m,handleCloseDelete:x,openDeleteDialog:A,handleUpdateNotification:D}=e;const N=d()(n),T=N.format("YYYY-MM-DD"),_=N.format("hh:mm:ss A");return(0,h.jsxs)("section",{className:"flex flex-col p-8 rounded-lg border border-gray-700 border-solid bg-secondary__fill  max-md:px-5",children:[(0,h.jsxs)("header",{className:"flex gap-3 justify-between w-full max-md:flex-wrap max-md:max-w-full",children:[(0,h.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,h.jsx)(E,{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/075c13b2da664ca5633519aac1c19411aa4d8cff7b28bc5cae6ebdbb9f417557?apiKey=33d350ef18e9405bbdd3cdc1375c0c2b&",alt:"Exam schedule icon"}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("h1",{className:"text-base text-white flex",children:a}),(0,h.jsxs)("div",{className:"flex",children:[(0,h.jsx)(f,{label:"Date",value:T}),"\xa0",(0,h.jsx)(f,{label:"Time",value:_})]})]})]}),(0,h.jsxs)("div",{className:"flex flex-1 justify-end gap-2.5 ml-auto",children:[(0,h.jsx)(o.In,{icon:"lucide:edit",className:"text-white",onClick:c}),(0,h.jsx)(o.In,{icon:"material-symbols:delete",color:"red",onClick:A,className:"cursor-pointer"})]})]}),(0,h.jsxs)(g,{children:["Description :",(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),s]}),(0,h.jsx)(u.A,{fullMessage:"Are you sure you want to Delete Chapter?",title:"Delete Chapter",handleClose:x,open:i,deleteHandler:m}),(0,h.jsx)(p,{id:t,initialTitle:a,initialDescription:s,isOpen:l,onClose:r,heading:"Edit Notifications",handleUpdateNotification:D})]})},D=e=>{let{value:t,onChange:a,handleAddNotification:s}=e;return(0,h.jsxs)("div",{className:"flex gap-5 justify-between p-8 rounded-xl border border-gray-700 border-solid bg-secondary__fill max-md:flex-wrap max-md:px-5",children:[(0,h.jsx)("input",{type:"text",placeholder:"Search Name, Enrollment, Standard",className:"w-80 justify-center items-start self-start px-3 py-3 text-sm leading-5 rounded border border-solid bg-secondary__fill__dark border-gray-700 border-opacity-20 text-white max-md:pr-5",value:t,onChange:a}),(0,h.jsxs)("button",{className:"flex items-center gap-2.5 px-4 py-2.5 text-base text-center bg-white rounded-lg text-secondary__fill",onClick:s,children:[(0,h.jsx)(o.In,{icon:"fluent:add-circle-20-regular"}),(0,h.jsx)("span",{className:"my-auto",children:"Add Notification"})]})]})};var N=a(86933);const T=()=>{const{data:e,isEditOpen:t,openDelete:a,searchTerm:s,totalShowItems:n,totalPages:l,currentPage:i,ITEMS_PER_PAGE:o,setCurrentPage:r,handleSearchChange:d,openEditDialog:u,closeEditDialog:m,confirmDeleteHandler:x,handleCloseDelete:p,openDeleteDialog:E,handleAddNotification:f,handleUpdateNotification:g}=c();return console.log("\ud83d\ude80 ~ NotificationView ~ data:",e),(0,h.jsxs)("div",{className:"w-full",style:{display:"flex",flexDirection:"column",overflowY:"hidden",padding:2},children:[(0,h.jsx)("div",{className:"w-max mb-6",children:(0,h.jsx)("h2",{className:"text-white text-[32px] font-normal font-['Helvetica'] text-left",children:"Notification"})}),(0,h.jsx)(D,{value:s,onChange:d,handleAddNotification:f}),(0,h.jsx)("div",{className:"flex-1 mt-4",children:e.length>0?(0,h.jsx)("div",{className:"grid lg:grid-cols-2 gap-6 sm:grid-cols-1 md:grid-cols-2 xs:grid-cols-1 w-full",children:e[0]&&e[0].map(((e,s)=>(0,h.jsx)(A,{id:e.id,title:e.title,description:e.description,image:e.image.url,createdAt:e.created_at,isEditOpen:t,openDelete:a,openEditDialog:u,closeEditDialog:m,confirmDeleteHandler:x,handleCloseDelete:p,openDeleteDialog:E,handleUpdateNotification:g},s)))}):(0,h.jsx)("p",{className:"text-white",children:"No records found."})}),n>o&&(0,h.jsx)(N.A,{totalCards:s?e.length:n,cardsPerPage:o,currentPage:i,setCurrentPage:r})]})},_=()=>(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(T,{})})},61543:(e,t,a)=>{a.d(t,{Ay:()=>r,Q9:()=>o,qp:()=>c});a(65043);var s=a(86213),n=a(60982),l=a(13429);const i=s.A.create({baseURL:n.A.HOST_URL+n.A.SUFFIX_URL}),c=()=>{const[e,t]=(0,l.Pj)();return i.interceptors.request.use((async e=>{var t,a;if(!navigator.onLine){const e=new Error("No internet connection");return e.name="NetworkError",Promise.reject(e)}const s=(null===(t=JSON.parse(window.localStorage.getItem("last_state")))||void 0===t||null===(a=t.user)||void 0===a?void 0:a.token)||"",n={...e};return s&&(n.headers={...n.headers,Authorization:"Bearer ".concat(s),Accept:"application/json","Content-Type":"multipart/form-data"}),n}),(e=>{var a;return 401===(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status)&&t({type:"RemoveState"}),Promise.reject(e)})),i.interceptors.response.use((e=>e),(async e=>{e.config;return Promise.reject(e)})),{axiosInstance:i}},o=()=>{const[e,t]=(0,l.Pj)();return{API:async function(t,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{},c={};var o;arguments.length>3&&void 0!==arguments[3]&&!arguments[3]||(c={headers:{Authorization:"Bearer ".concat((arguments.length>5&&void 0!==arguments[5]?arguments[5]:"")||(null===e||void 0===e||null===(o=e.user)||void 0===o?void 0:o.token))},...n});switch(t){case"GET":l(!0);return i.get(a,c).then((e=>(l(!1),e))).catch((e=>(l(!1),e)));case"POST":l(!0);return i.post(a,s,c).then((e=>(l(!1),e))).catch((e=>(l(!1),e)));case"PUT":return i.put(a,s,c).then((e=>(l(!1),e))).catch((e=>(l(!1),e)));case"PATCH":return i.patch(a,s,c).then((e=>(l(!1),e))).catch((e=>(l(!1),e)));case"DELETE":return i.delete(a,c).then((e=>(l(!1),e))).catch((e=>(l(!1),e)));default:return i.get(a,c).then((e=>(l(!1),e))).catch((e=>(l(!1),e)))}}}},r=i}}]);
//# sourceMappingURL=2593.05a5d15c.chunk.js.map